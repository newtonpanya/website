<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>YCT Online Quiz</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC&display=swap" rel="stylesheet">

<style>
  body{
    font-family:'Noto Sans SC',sans-serif;
    background:#E8F5FF;
    padding:20px;
    margin:0;
  }
  .screen{display:none;}
  .active{display:block;}
  .card{
    background:white;
    padding:20px;
    border-radius:12px;
    max-width:700px;
    margin:auto;
    box-shadow:0 2px 8px #0003;
  }
  button{
    padding:10px 20px;
    border-radius:8px;
    border:none;
    cursor:pointer;
    background:#2196F3;
    color:white;
    font-size:18px;
    margin:5px 0;
  }
  .choice{
    padding:10px;
    border:1px solid #ccc;
    border-radius:8px;
    margin-bottom:10px;
    cursor:pointer;
  }
  .correct{background:#C8FACC;}
  .wrong{background:#FFCCCC;}
  table{
    width:100%;
    border-collapse:collapse;
    margin-top:15px;
  }
  table,th,td{border:1px solid #999;}
  th,td{
    padding:8px;
    text-align:center;
    background:white;
  }
</style>
</head>
<body>

<!-- ------------------ ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å ------------------ -->
<div id="startScreen" class="screen active">
  <div class="card">
    <h1>üßß YCT Online Quiz</h1>
    <button onclick="startQuiz()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</button>
    <button onclick="openLeaderboard()">‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</button>
    <button onclick="openTeacher()">‡πÇ‡∏´‡∏°‡∏î‡∏Ñ‡∏£‡∏π</button>
  </div>
</div>

<!-- ------------------ ‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö ------------------ -->
<div id="quizScreen" class="screen">
  <div class="card">
    <h2 id="qTitle"></h2>
    <p id="qText"></p>
    <div id="choiceBox"></div>
    <p>‚è≥ <span id="timer"></span></p>
    <button onclick="nextQuestion()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
  </div>
</div>

<!-- ------------------ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå ------------------ -->
<div id="resultScreen" class="screen">
  <div class="card">
    <h2>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</h2>
    <p id="scoreText"></p>
    <div id="answerReview"></div>
    <button onclick="saveScore()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</button>
    <button onclick="backToHome()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
  </div>
</div>

<!-- ------------------ Leaderboard ------------------ -->
<div id="leaderboardScreen" class="screen">
  <div class="card">
    <h2>üèÜ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</h2>
    <table id="boardTable"></table>
    <button onclick="backToHome()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
  </div>
</div>

<!-- ------------------ Teacher Mode ------------------ -->
<div id="teacherLogin" class="screen">
  <div class="card">
    <h2>‡πÇ‡∏´‡∏°‡∏î‡∏Ñ‡∏£‡∏π</h2>
    <input id="teacherCode" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏£‡∏π 2222" />
    <button onclick="checkTeacher()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
    <button onclick="backToHome()">‡∏Å‡∏•‡∏±‡∏ö</button>
  </div>
</div>

<div id="teacherScreen" class="screen">
  <div class="card">
    <h2>üìö ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h2>
    <table id="teacherTable"></table>
    <button onclick="logoutTeacher()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
    <button onclick="backToHome()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
  </div>
</div>

<script>
// ----------------------------- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö -----------------------------
const questions = [
  {
    q:"1. ‰Ω†Â•ΩÂêóÔºü ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡πÉ‡∏î",
    choices:["‡∏™‡∏ö‡∏≤‡∏¢‡∏î‡∏µ‡πÑ‡∏´‡∏°","‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£","‡πÑ‡∏õ‡πÑ‡∏´‡∏ô‡∏°‡∏≤"],
    answer:0
  },
  {
    q:"2. Âõæ‰π¶È¶Ü‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£",
    choices:["‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏°‡∏∏‡∏î","‡πÇ‡∏£‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£","‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"],
    answer:0
  }
];

// ----------------------------- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏´‡∏•‡∏±‡∏Å -----------------------------
let index = 0;
let score = 0;
let userAns = [];
let timer = 0;
let timerId = null;

// ----------------------------- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö -----------------------------
function startQuiz(){
  index = 0;
  score = 0;
  userAns = [];
  showScreen("quizScreen");
  loadQuestion();
  startTimer(3 * questions.length * 60); 
}

// ----------------------------- ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° -----------------------------
function loadQuestion(){
  const q = questions[index];
  document.getElementById("qTitle").innerText = `‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${index+1} / ${questions.length}`;
  document.getElementById("qText").innerText = q.q;

  let html = "";
  q.choices.forEach((c,i)=>{
    html += `<div class="choice" onclick="selectAnswer(${i})">${c}</div>`;
  });
  document.getElementById("choiceBox").innerHTML = html;
}

// ----------------------------- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö -----------------------------
function selectAnswer(i){
  userAns[index] = i;
  const items = document.querySelectorAll(".choice");
  items.forEach(el=>el.style.background="white");
  items[i].style.background="#D3E5FF";
}

// ----------------------------- ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ -----------------------------
function nextQuestion(){
  if(userAns[index] == null){
    alert("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô!");
    return;
  }
  index++;

  if(index >= questions.length){
    finishQuiz();
  } else {
    loadQuestion();
  }
}

// ----------------------------- ‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ -----------------------------
function startTimer(sec){
  timer = sec;
  updateTimer();
  timerId = setInterval(()=>{
    timer--;
    updateTimer();
    if(timer <= 0){
      clearInterval(timerId);
      finishQuiz();
    }
  },1000);
}
function updateTimer(){
  const m = Math.floor(timer/60);
  const s = timer%60;
  document.getElementById("timer").innerText = `${m}:${s.toString().padStart(2,"0")}`;
}

// ----------------------------- ‡∏à‡∏ö‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö -----------------------------
function finishQuiz(){
  clearInterval(timerId);
  showScreen("resultScreen");

  score = 0;
  let review = "";

  questions.forEach((q,i)=>{
    const correct = q.answer;
    const ua = userAns[i];

    if(ua === correct) score++;

    const color = ua===correct ? "correct" : "wrong";
    review += `
      <div class="${color}">
        <p><b>‡∏Ç‡πâ‡∏≠ ${i+1}:</b> ${q.q}</p>
        <p>‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: ${q.choices[ua] || "‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏≠‡∏ö"}</p>
        <p>‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å: ${q.choices[correct]}</p>
      </div><br>
    `;
  });

  document.getElementById("scoreText").innerHTML = `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: <b>${score}/${questions.length}</b>`;
  document.getElementById("answerReview").innerHTML = review;
}

// ----------------------------- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô -----------------------------
function saveScore(){
  const name = prompt("‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠: ");
  if(!name) return;

  const arr = JSON.parse(localStorage.getItem("yctScores")||"[]");
  arr.push({name,score,total:questions.length,date:new Date().toLocaleString()});
  localStorage.setItem("yctScores",JSON.stringify(arr));
  alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
}

// ----------------------------- Leaderboard -----------------------------
function openLeaderboard(){
  showScreen("leaderboardScreen");
  const arr = JSON.parse(localStorage.getItem("yctScores")||"[]");
  let html = "<tr><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th><th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th></tr>";
  arr.sort((a,b)=>b.score-a.score);
  arr.forEach(r=>{
    html += `<tr><td>${r.name}</td><td>${r.score}/${r.total}</td><td>${r.date}</td></tr>`;
  });
  document.getElementById("boardTable").innerHTML = html;
}

// ----------------------------- Teacher Mode -----------------------------
function openTeacher(){ showScreen("teacherLogin"); }

function checkTeacher(){
  if(document.getElementById("teacherCode").value === "2222"){
    renderTeacher();
    showScreen("teacherScreen");
  }else{
    alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏¥‡∏î!");
  }
}

function renderTeacher(){
  const arr = JSON.parse(localStorage.getItem("yctScores")||"[]");
  let html = "<tr><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th><th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th><th>‡∏•‡∏ö</th></tr>";
  arr.forEach((r,i)=>{
    html += `
      <tr>
        <td>${r.name}</td>
        <td>${r.score}/${r.total}</td>
        <td>${r.date}</td>
        <td><button onclick="deleteRec(${i})">‡∏•‡∏ö</button></td>
      </tr>
    `;
  });
  document.getElementById("teacherTable").innerHTML = html;
}

function deleteRec(i){
  const arr = JSON.parse(localStorage.getItem("yctScores")||"[]");
  arr.splice(i,1);
  localStorage.setItem("yctScores",JSON.stringify(arr));
  renderTeacher();
}

function logoutTeacher(){
  document.getElementById("teacherCode").value="";
  showScreen("startScreen");
}

// ----------------------------- Utils -----------------------------
function showScreen(id){
  document.querySelectorAll(".screen").forEach(sc=>sc.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function backToHome(){ showScreen("startScreen"); }

</script>
</body>
</html>
