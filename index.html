<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>üßß YCT Online Quiz (Reading + Listening)</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#E8F5FF; --card:#ffffff; --accent:#0288D1; --accent-2:#03A9F4;
    --good:#4CAF50; --bad:#E53935; --hint:#1976D2; --muted:#666;
  }
  body{
    font-family: "Noto Sans SC", "Arial", sans-serif;
    background: linear-gradient(180deg, #f4fbff 0%, var(--bg) 100%);
    margin:0; padding:20px;
    min-height:100vh;
  }
  .container{ max-width:980px; margin:0 auto; background:var(--card); padding:22px; border-radius:14px;
    box-shadow:0 6px 22px rgba(3,64,120,0.08);
  }
  h1{ text-align:center; color:var(--accent); margin:0 0 12px 0; }
  p.lead{ text-align:center; color:var(--muted); margin-top:6px; }
  .flex{ display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin:14px 0; }
  button{ background:var(--accent-2); color:#fff; border:none; padding:10px 14px; border-radius:10px; cursor:pointer;
    font-weight:600; box-shadow:0 4px 10px rgba(3,169,244,0.12);
  }
  button.ghost{ background:#fff; color:var(--accent-2); border:1px solid var(--accent-2); }
  .hidden{ display:none !important; }
  .card{ background:linear-gradient(180deg,#fff,#fbfeff); border-radius:12px; padding:14px; box-shadow:0 4px 14px rgba(2,136,209,0.04); }
  .timer{ text-align:center; font-weight:700; color:var(--accent); font-size:1.1rem; margin-bottom:12px; }
  .question{ font-size:1.15rem; padding:10px 12px; border-radius:10px; background:rgba(2,136,209,0.05); margin-bottom:10px; }
  .options button{ display:block; width:100%; margin:8px 0; padding:10px; border-radius:8px; text-align:left; background:#fff; border:1px solid #e6f4ff; color:#013e5a; }
  .options button.correct{ background:var(--good); color:#fff; border-color:transparent; }
  .options button.wrong{ background:var(--bad); color:#fff; border-color:transparent; }
  .options button.answer{ background:#E3F2FD; color:var(--hint); border-color:transparent; }
  .meta{ display:flex; gap:10px; justify-content:space-between; align-items:center; margin-bottom:10px; flex-wrap:wrap; }
  input[type="text"]{ padding:8px 10px; border-radius:8px; border:1px solid #ddd; width:calc(100% - 16px); }
  table{ width:100%; border-collapse:collapse; margin-top:12px; }
  th,td{ padding:8px; border:1px solid #e9f4ff; text-align:center; }
  th{ background:linear-gradient(90deg,var(--accent-2),var(--accent)); color:#fff; }
  .small{ font-size:0.9rem; color:var(--muted); }
  .center{ text-align:center; }
  .badge{ display:inline-block; padding:6px 8px; border-radius:8px; background:#fff; border:1px solid #e6f4ff; color:var(--accent); font-weight:600; }
  .result-good{ color:var(--good); font-weight:700; }
  .result-bad{ color:var(--bad); font-weight:700; }
  .controls{ display:flex; gap:8px; justify-content:center; flex-wrap:wrap; }
  footer{ margin-top:14px; text-align:center; color:var(--muted); font-size:0.9rem; }
  .play-btn{ background:#fff; color:var(--accent-2); border:1px solid rgba(3,169,244,0.25); padding:8px 10px; border-radius:8px; }
  @media (min-width:700px){
    .options button{ width:49%; display:inline-block; }
  }
</style>
</head>
<body>
<div class="container">
  <h1>üßß YCT Online Quiz</h1>
  <p class="lead small">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∏‡∏î => ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏•‡πà‡∏ô‡∏û‡∏≤‡∏£‡πå‡∏ó ‡∏ü‡∏±‡∏á(Âê¨Âäõ) ‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢ ‡∏≠‡πà‡∏≤‡∏ô(ÈòÖËØª) ‚Äî ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á (TTS)</p>

  <!-- Start -->
  <div id="startScreen" class="card">
    <div class="flex">
      <button onclick="beginSet('YCT1')">‡πÄ‡∏£‡∏¥‡πà‡∏° YCT1 (Âê¨Âäõ20 + ÈòÖËØª15)</button>
      <button onclick="beginSet('YCT2')">‡πÄ‡∏£‡∏¥‡πà‡∏° YCT2 (Âê¨Âäõ20 + ÈòÖËØª20)</button>
      <button class="ghost" onclick="showLeaderboard()">üèÜ ‡∏î‡∏π Leaderboard</button>
      <button class="ghost" onclick="enterTeacherMode()">üë©‚Äçüè´ ‡πÇ‡∏´‡∏°‡∏î‡∏Ñ‡∏£‡∏π</button>
    </div>
    <div class="flex center">
      <div class="badge">‡πÄ‡∏ß‡∏•‡∏≤ / ‡∏Ç‡πâ‡∏≠ = 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
      <div class="badge">‡∏ú‡πà‡∏≤‡∏ô ‚â• 120 / 200</div>
      <div class="badge">‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: localStorage</div>
    </div>
  </div>

  <!-- Quiz Screen -->
  <div id="quizScreen" class="card hidden">
    <div class="meta">
      <div class="timer" id="timer">‡πÄ‡∏ß‡∏•‡∏≤: 60</div>
      <div>
        <button class="play-btn" id="playAudioBtn" title="‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á" onclick="playCurrentTTS()">üîä ‡∏ü‡∏±‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        <span class="small" id="partLabel"></span>
      </div>
    </div>

    <div id="questionBox"></div>
    <div class="controls" id="controlsRow"></div>
  </div>

  <!-- Result Screen -->
  <div id="resultScreen" class="card hidden">
    <h2 class="center">‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</h2>
    <p id="scoreSummary" class="center"></p>
    <div class="center small" id="passFail"></div>

    <h3>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏â‡∏•‡∏¢</h3>
    <div id="answerList"></div>

    <div style="margin-top:12px;">
      <label>‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å:</label>
      <input id="studentName" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)">
      <div style="margin-top:10px;" class="flex">
        <button onclick="saveResult()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</button>
        <button class="ghost" onclick="backToHome()">üè† ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
        <button class="ghost" onclick="showLeaderboard()">üèÜ ‡∏î‡∏π Leaderboard</button>
      </div>
    </div>
  </div>

  <!-- Leaderboard -->
  <div id="leaderboardScreen" class="card hidden">
    <h2 class="center">üèÜ Leaderboard</h2>
    <table id="leaderboardTable">
      <thead><tr><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏î‡∏¥‡∏ö</th><th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á</th><th>‡πÄ‡∏ß‡∏•‡∏≤</th><th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th></tr></thead>
      <tbody></tbody>
    </table>
    <div style="margin-top:10px;" class="flex center">
      <button class="ghost" onclick="clearLocalScores()">üßπ ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
      <button class="ghost" onclick="backToHome()">üè† ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
    </div>
  </div>

  <!-- Teacher -->
  <div id="teacherScreen" class="card hidden">
    <h2 class="center">üë©‚Äçüè´ ‡πÇ‡∏´‡∏°‡∏î‡∏Ñ‡∏£‡∏π</h2>
    <div class="small center">‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏£‡∏π‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ: <b>2222</b></div>
    <table id="teacherTable">
      <thead><tr><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏î‡∏¥‡∏ö</th><th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á</th><th>‡πÄ‡∏ß‡∏•‡∏≤</th><th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th></tr></thead>
      <tbody></tbody>
    </table>
    <div style="margin-top:8px;" class="flex center">
      <button onclick="addRecord()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏Ñ‡∏Ñ‡∏≠‡∏£‡πå‡∏î‡πÉ‡∏´‡∏°‡πà</button>
      <button class="ghost" onclick="backToHome()">üè† ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
    </div>
  </div>

  <footer>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢ YCT Quiz Generator ‚Äî ‡πÉ‡∏ä‡πâ localStorage ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</footer>
</div>

<script>
/* ====== ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° (‡πÉ‡∏ä‡πâ‡∏ä‡∏∏‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö ‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£) ====== */
const questions = {
  YCT1_listen: [
    {q:"‰ªñÊòØËÄÅÂ∏à„ÄÇtƒÅ sh√¨ l«éoshƒ´.", opts:["‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏π","‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô","‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏°‡∏≠"], ans:0},
    {q:"Ë∞¢Ë∞¢ÔºÅxi√®xie!", opts:["‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ","‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì","‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô"], ans:1},
    {q:"ÂÜçËßÅÔºÅz√†iji√†n!", opts:["‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô","‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ","‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì"], ans:0},
    {q:"Â¶àÂ¶à mƒÅma", opts:["‡∏û‡πà‡∏≠","‡πÅ‡∏°‡πà","‡∏û‡∏µ‡πà‡∏™‡∏≤‡∏ß"], ans:1},
    {q:"ÊàëÁà±‰Ω† w«í √†i n«ê", opts:["‡∏â‡∏±‡∏ô‡∏£‡∏±‡∏Å‡πÄ‡∏ò‡∏≠","‡∏â‡∏±‡∏ô‡πÄ‡∏Å‡∏•‡∏µ‡∏¢‡∏î‡πÄ‡∏ò‡∏≠","‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ"], ans:0},
    {q:"‰ªñÊòØË∞ÅÔºütƒÅ sh√¨ shu√≠?", opts:["‡πÄ‡∏Ç‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏ô","‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏Ñ‡∏£","‡πÄ‡∏Ç‡∏≤‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£"], ans:1},
    {q:"ÊàëÂñúÊ¨¢ËãπÊûú„ÄÇw«í x«êhuan p√≠nggu«í", opts:["‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•","‡∏â‡∏±‡∏ô‡∏Å‡∏¥‡∏ô‡∏Å‡∏•‡πâ‡∏ß‡∏¢","‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏ä‡∏≠‡∏ö‡∏™‡πâ‡∏°"], ans:0},
    {q:"Ë∞¢Ë∞¢ËÄÅÂ∏à„ÄÇxi√®xie l«éoshƒ´", opts:["‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π","‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏π","‡∏Ñ‡∏£‡∏π‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏ô"], ans:0},
    {q:"ÊàëÂè´ÊòéÊòé„ÄÇw«í ji√†o m√≠ngm√≠ng", opts:["‡∏â‡∏±‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏¥‡∏á‡∏´‡∏°‡∏¥‡∏á","‡∏â‡∏±‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏á‡∏´‡∏á","‡∏â‡∏±‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡πÄ‡∏ï‡πã‡∏≠"], ans:0},
    {q:"‰Ω†Â•ΩÂêóÔºün«ê h«éo ma?", opts:["‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô","‡∏™‡∏ö‡∏≤‡∏¢‡∏î‡∏µ‡πÑ‡∏´‡∏°","‡πÄ‡∏ò‡∏≠‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£"], ans:1},
    {q:"ÊàëÂæàÂ•Ω„ÄÇw«í hƒõn h«éo", opts:["‡∏â‡∏±‡∏ô‡∏î‡∏µ‡∏°‡∏≤‡∏Å","‡∏â‡∏±‡∏ô‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢","‡∏â‡∏±‡∏ô‡πÄ‡∏®‡∏£‡πâ‡∏≤"], ans:0},
    {q:"Áà∏Áà∏Âú®ÂÆ∂„ÄÇb√†ba z√†i jiƒÅ", opts:["‡∏û‡πà‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô","‡πÅ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô","‡∏û‡πà‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"], ans:0},
    {q:"ÊàëÊúâ‰∏Ä‰∏™Âì•Âì•„ÄÇw«í y«íu yƒ´ g√® gƒìge", opts:["‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏û‡∏µ‡πà‡∏ä‡∏≤‡∏¢‡∏Ñ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á","‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏µ‡πà‡∏ä‡∏≤‡∏¢","‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏á‡∏ä‡∏≤‡∏¢"], ans:0},
    {q:"ÊàëÂñúÊ¨¢Â≠¶‰π†„ÄÇw«í x«êhuan xu√©x√≠", opts:["‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô","‡∏â‡∏±‡∏ô‡πÄ‡∏Å‡∏•‡∏µ‡∏¢‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ô","‡∏â‡∏±‡∏ô‡∏≠‡∏¢‡∏≤‡∏Å‡∏ô‡∏≠‡∏ô"], ans:0},
    {q:"Ë∞¢Ë∞¢‰Ω†„ÄÇxi√®xie n«ê", opts:["‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ","‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì","‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô"], ans:1},
    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 20 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ü‡∏±‡∏á (‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠‡∏Å ‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏ã‡πâ‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°)
    {q:"‰ªäÂ§©Â§©Ê∞îÂæàÂ•Ω„ÄÇjƒ´ntiƒÅn tiƒÅnq√¨ hƒõn h«éo", opts:["‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏î‡∏µ","‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏£‡πâ‡∏≠‡∏ô","‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏ù‡∏ô"], ans:0},
    {q:"ÊàëÂú®Â≠¶Ê†°„ÄÇw«í z√†i xu√©xi√†o„ÄÇ", opts:["‡∏â‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô","‡∏â‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô","‡∏â‡∏±‡∏ôÂéª‡∏ï‡∏•‡∏≤‡∏î"], ans:0},
    {q:"‰Ω†‰ºöÊ∏∏Ê≥≥ÂêóÔºün«ê hu√¨ y√≥uy«íng ma?", opts:["‡∏Ñ‡∏∏‡∏ì‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°","‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ï‡πâ‡∏ô‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°","‡∏Ñ‡∏∏‡∏ì‡∏ß‡∏¥‡πà‡∏á‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°"], ans:0},
    {q:"ËØ∑Âùê„ÄÇq«êng zu√≤„ÄÇ", opts:["‡πÄ‡∏ä‡∏¥‡∏ç‡∏ô‡∏±‡πà‡∏á","‡πÄ‡∏ä‡∏¥‡∏ç‡∏Å‡∏¥‡∏ô","‡πÄ‡∏ä‡∏¥‡∏ç‡πÄ‡∏Ç‡πâ‡∏≤"], ans:0},
    {q:"‰∏çË¶ÅËØ¥ËØù„ÄÇb√πy√†o shu≈çhu√†„ÄÇ", opts:["‡∏≠‡∏¢‡πà‡∏≤‡∏û‡∏π‡∏î","‡∏≠‡∏¢‡πà‡∏≤‡∏Å‡∏¥‡∏ô","‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏ô"], ans:0}
  ],
  YCT1_read: [
    // 15 ‡∏Ç‡πâ‡∏≠‡∏≠‡πà‡∏≤‡∏ô (‡πÉ‡∏ä‡πâ‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà)
    {q:"ÊàëÁà±‰Ω† w«í √†i n«ê", opts:["‡∏â‡∏±‡∏ô‡∏£‡∏±‡∏Å‡πÄ‡∏ò‡∏≠","‡∏â‡∏±‡∏ô‡πÄ‡∏Å‡∏•‡∏µ‡∏¢‡∏î‡πÄ‡∏ò‡∏≠","‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ"], ans:0},
    {q:"Â¶àÂ¶à mƒÅma", opts:["‡∏û‡πà‡∏≠","‡πÅ‡∏°‡πà","‡∏û‡∏µ‡πà‡∏™‡∏≤‡∏ß"], ans:1},
    {q:"ÊàëÂñúÊ¨¢Â≠¶‰π†„ÄÇw«í x«êhuan xu√©x√≠", opts:["‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô","‡∏â‡∏±‡∏ô‡πÄ‡∏Å‡∏•‡∏µ‡∏¢‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ô","‡∏â‡∏±‡∏ô‡∏≠‡∏¢‡∏≤‡∏Å‡∏ô‡∏≠‡∏ô"], ans:0},
    {q:"ÊàëÊúâ‰∏Ä‰∏™Âì•Âì•„ÄÇw«í y«íu yƒ´ g√® gƒìge", opts:["‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏û‡∏µ‡πà‡∏ä‡∏≤‡∏¢‡∏Ñ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á","‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏µ‡πà‡∏ä‡∏≤‡∏¢","‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏á‡∏ä‡∏≤‡∏¢"], ans:0},
    {q:"Ë∞¢Ë∞¢‰Ω†„ÄÇxi√®xie n«ê", opts:["‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ","‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì","‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô"], ans:1},
    {q:"‰ªñÊòØËÄÅÂ∏à„ÄÇtƒÅ sh√¨ l«éoshƒ´.", opts:["‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏π","‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô","‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏°‡∏≠"], ans:0},
    {q:"‰Ω†Â•ΩÂêóÔºün«ê h«éo ma?", opts:["‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô","‡∏™‡∏ö‡∏≤‡∏¢‡∏î‡∏µ‡πÑ‡∏´‡∏°","‡πÄ‡∏ò‡∏≠‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£"], ans:1},
    {q:"ÊàëÂæàÂ•Ω„ÄÇw«í hƒõn h«éo", opts:["‡∏â‡∏±‡∏ô‡∏î‡∏µ‡∏°‡∏≤‡∏Å","‡∏â‡∏±‡∏ô‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢","‡∏â‡∏±‡∏ô‡πÄ‡∏®‡∏£‡πâ‡∏≤"], ans:0},
    {q:"Ë∞¢Ë∞¢ËÄÅÂ∏à„ÄÇxi√®xie l«éoshƒ´", opts:["‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π","‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏π","‡∏Ñ‡∏£‡∏π‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏ô"], ans:0},
    {q:"ÊàëÂè´ÊòéÊòé„ÄÇw«í ji√†o m√≠ngm√≠ng", opts:["‡∏â‡∏±‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏¥‡∏á‡∏´‡∏°‡∏¥‡∏á","‡∏â‡∏±‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏á‡∏´‡∏á","‡∏â‡∏±‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡πÄ‡∏ï‡πã‡∏≠"], ans:0},
    {q:"Áà∏Áà∏Âú®ÂÆ∂„ÄÇb√†ba z√†i jiƒÅ", opts:["‡∏û‡πà‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô","‡πÅ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô","‡∏û‡πà‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"], ans:0},
    {q:"ÂÜçËßÅÔºÅz√†iji√†n!", opts:["‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô","‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ","‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì"], ans:0},
    {q:"Ë∞¢Ë∞¢ÔºÅxi√®xie!", opts:["‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ","‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì","‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô"], ans:1},
    {q:"‰ªñÊòØË∞ÅÔºütƒÅ sh√¨ shu√≠?", opts:["‡πÄ‡∏Ç‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏ô","‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏Ñ‡∏£","‡πÄ‡∏Ç‡∏≤‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£"], ans:1},
    {q:"ÊàëÂñúÊ¨¢ËãπÊûú„ÄÇw«í x«êhuan p√≠nggu«í", opts:["‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•","‡∏â‡∏±‡∏ô‡∏Å‡∏¥‡∏ô‡∏Å‡∏•‡πâ‡∏ß‡∏¢","‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏ä‡∏≠‡∏ö‡∏™‡πâ‡∏°"], ans:0}
  ],

  // YCT2
  YCT2_listen: [
    {q:"‰Ω†Âè´‰ªÄ‰πàÂêçÂ≠óÔºün«ê ji√†o sh√©nme m√≠ngz√¨?", opts:["‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£","‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô","‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£"], ans:0},
    {q:"ÊàëÂñúÊ¨¢ËãπÊûú„ÄÇw«í x«êhuƒÅn p√≠nggu«í„ÄÇ", opts:["‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏ä‡∏≠‡∏ö‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•","‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•","‡∏â‡∏±‡∏ô‡∏Å‡∏¥‡∏ô‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•"], ans:1},
    {q:"‰ªñÂá†Â≤ÅÔºütƒÅ j«ê su√¨?", opts:["‡πÄ‡∏Ç‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£","‡πÄ‡∏Ç‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏ô","‡πÄ‡∏Ç‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£"], ans:0},
    {q:"‰ªäÂ§©ÊòüÊúüÂá†Ôºüjƒ´ntiƒÅn xƒ´ngqƒ´ j«ê?", opts:["‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ß‡∏±‡∏ô‡∏≠‡∏∞‡πÑ‡∏£","‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏ß‡∏±‡∏ô‡∏≠‡∏∞‡πÑ‡∏£","‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô‡∏ß‡∏±‡∏ô‡∏≠‡∏∞‡πÑ‡∏£"], ans:0},
    {q:"ÊàëÂú®Â≠¶Ê†°„ÄÇw«í z√†i xu√©xi√†o„ÄÇ", opts:["‡∏â‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô","‡∏â‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô","‡∏â‡∏±‡∏ô‡πÑ‡∏õ‡∏ï‡∏•‡∏≤‡∏î"], ans:0},
    {q:"Áé∞Âú®Âá†ÁÇπÔºüxi√†nz√†i j«ê di«én?", opts:["‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏µ‡πà‡πÇ‡∏°‡∏á","‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ß‡∏±‡∏ô‡∏≠‡∏∞‡πÑ‡∏£","‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏Å‡∏µ‡πà‡πÇ‡∏°‡∏á"], ans:0},
    {q:"ÊàëÊúâ‰∏§‰∏™ÂßêÂßê„ÄÇw«í y«íu li«éng g√® jiƒõjie„ÄÇ", opts:["‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏û‡∏µ‡πà‡∏™‡∏≤‡∏ß‡∏™‡∏≠‡∏á‡∏Ñ‡∏ô","‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏û‡∏µ‡πà‡∏ä‡∏≤‡∏¢‡∏™‡∏≠‡∏á‡∏Ñ‡∏ô","‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏µ‡πà"], ans:0},
    {q:"‰Ω†‰ºöÊ∏∏Ê≥≥ÂêóÔºün«ê hu√¨ y√≥uy«íng ma?", opts:["‡∏Ñ‡∏∏‡∏ì‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°","‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ï‡πâ‡∏ô‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°","‡∏Ñ‡∏∏‡∏ì‡∏ß‡∏¥‡πà‡∏á‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°"], ans:0},
    {q:"‰ªñÂú®ÂÅö‰ªÄ‰πàÔºütƒÅ z√†i zu√≤ sh√©nme?", opts:["‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£","‡πÄ‡∏Ç‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏ô","‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏Ñ‡∏£"], ans:0},
    {q:"ÊòéÂ§©ËßÅ„ÄÇm√≠ngtiƒÅn ji√†n„ÄÇ", opts:["‡∏û‡∏ö‡∏Å‡∏±‡∏ô‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ","‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô","‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤"], ans:0},
    {q:"Â•πÂæàÊºÇ‰∫Æ„ÄÇtƒÅ hƒõn pi√†oliang„ÄÇ", opts:["‡πÄ‡∏ò‡∏≠‡∏™‡∏ß‡∏¢‡∏°‡∏≤‡∏Å","‡πÄ‡∏ò‡∏≠‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å","‡πÄ‡∏ò‡∏≠‡∏≠‡πâ‡∏ß‡∏ô‡∏°‡∏≤‡∏Å"], ans:0},
    {q:"‰Ω†ÂñúÊ¨¢‰ªÄ‰πàÈ¢úËâ≤Ôºün«ê x«êhuƒÅn sh√©nme y√°ns√®?", opts:["‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏≠‡∏ö‡∏™‡∏µ‡∏≠‡∏∞‡πÑ‡∏£","‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô","‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£"], ans:0},
    {q:"‰ªñÂú®ÂêÉÈ•≠„ÄÇtƒÅ z√†i chƒ´f√†n„ÄÇ", opts:["‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß","‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ô‡∏≠‡∏ô","‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πà‡∏á"], ans:0},
    {q:"‰Ω†Âú®Âì™ÂÑøÔºün«ê z√†i n«ér?", opts:["‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô","‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£","‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£"], ans:0},
    {q:"ÊàëÊúâ‰∏ÄÂè™Áãó„ÄÇw«í y«íu y√¨ zhƒ´ g«íu„ÄÇ", opts:["‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ï‡∏±‡∏ß","‡∏â‡∏±‡∏ô‡∏°‡∏µ‡πÅ‡∏°‡∏ß‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ï‡∏±‡∏ß","‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏±‡∏ï‡∏ß‡πå"], ans:0},
    {q:"‰Ω†ÂÆ∂ÊúâÂá†Âè£‰∫∫Ôºün«ê jiƒÅ y«íu j«ê k«íu r√©n?", opts:["‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏Ñ‡∏ô","‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô","‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡∏ç‡πà‡πÑ‡∏´‡∏°"], ans:0},
    {q:"‰ªñÊòØÊàëÁöÑÊúãÂèã„ÄÇtƒÅ sh√¨ w«í de p√©ngyou„ÄÇ", opts:["‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô","‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏µ‡πà‡∏ä‡∏≤‡∏¢‡∏â‡∏±‡∏ô","‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏π‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô"], ans:0},
    {q:"ËØ∑Âùê„ÄÇq«êng zu√≤„ÄÇ", opts:["‡πÄ‡∏ä‡∏¥‡∏ç‡∏ô‡∏±‡πà‡∏á","‡πÄ‡∏ä‡∏¥‡∏ç‡∏Å‡∏¥‡∏ô","‡πÄ‡∏ä‡∏¥‡∏ç‡πÄ‡∏Ç‡πâ‡∏≤"], ans:0},
    {q:"‰∏çË¶ÅËØ¥ËØù„ÄÇb√πy√†o shu≈çhu√†„ÄÇ", opts:["‡∏≠‡∏¢‡πà‡∏≤‡∏û‡∏π‡∏î","‡∏≠‡∏¢‡πà‡∏≤‡∏Å‡∏¥‡∏ô","‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏ô"], ans:0},
    {q:"Ë∞¢Ë∞¢ËÄÅÂ∏à„ÄÇxi√®xi√® l«éoshƒ´„ÄÇ", opts:["‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π","‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏π","‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏π"], ans:0}
  ],
  YCT2_read: [
    // 20 ‡∏Ç‡πâ‡∏≠‡∏≠‡πà‡∏≤‡∏ô (‡πÉ‡∏ä‡πâ‡∏ä‡∏∏‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô ‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°)
    {q:"‰Ω†Âè´‰ªÄ‰πàÂêçÂ≠óÔºün«ê ji√†o sh√©nme m√≠ngz√¨?", opts:["‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£","‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô","‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£"], ans:0},
    {q:"ÊàëÂñúÊ¨¢ËãπÊûú„ÄÇw«í x«êhuƒÅn p√≠nggu«í„ÄÇ", opts:["‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏ä‡∏≠‡∏ö‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•","‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•","‡∏â‡∏±‡∏ô‡∏Å‡∏¥‡∏ô‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•"], ans:1},
    {q:"‰ªñÂá†Â≤ÅÔºütƒÅ j«ê su√¨?", opts:["‡πÄ‡∏Ç‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£","‡πÄ‡∏Ç‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏ô","‡πÄ‡∏Ç‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£"], ans:0},
    {q:"‰ªäÂ§©ÊòüÊúüÂá†Ôºüjƒ´ntiƒÅn xƒ´ngqƒ´ j«ê?", opts:["‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ß‡∏±‡∏ô‡∏≠‡∏∞‡πÑ‡∏£","‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏ß‡∏±‡∏ô‡∏≠‡∏∞‡πÑ‡∏£","‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô‡∏ß‡∏±‡∏ô‡∏≠‡∏∞‡πÑ‡∏£"], ans:0},
    {q:"ÊàëÂú®Â≠¶Ê†°„ÄÇw«í z√†i xu√©xi√†o„ÄÇ", opts:["‡∏â‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô","‡∏â‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô","‡∏â‡∏±‡∏ô‡πÑ‡∏õ‡∏ï‡∏•‡∏≤‡∏î"], ans:0},
    {q:"Áé∞Âú®Âá†ÁÇπÔºüxi√†nz√†i j«ê di«én?", opts:["‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏µ‡πà‡πÇ‡∏°‡∏á","‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ß‡∏±‡∏ô‡∏≠‡∏∞‡πÑ‡∏£","‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏Å‡∏µ‡πà‡πÇ‡∏°‡∏á"], ans:0},
    {q:"ÊàëÊúâ‰∏§‰∏™ÂßêÂßê„ÄÇw«í y«íu li«éng g√® jiƒõjie„ÄÇ", opts:["‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏û‡∏µ‡πà‡∏™‡∏≤‡∏ß‡∏™‡∏≠‡∏á‡∏Ñ‡∏ô","‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏û‡∏µ‡πà‡∏ä‡∏≤‡∏¢‡∏™‡∏≠‡∏á‡∏Ñ‡∏ô","‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏µ‡πà"], ans:0},
    {q:"‰Ω†‰ºöÊ∏∏Ê≥≥ÂêóÔºün«ê hu√¨ y√≥uy«íng ma?", opts:["‡∏Ñ‡∏∏‡∏ì‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°","‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ï‡πâ‡∏ô‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°","‡∏Ñ‡∏∏‡∏ì‡∏ß‡∏¥‡πà‡∏á‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°"], ans:0},
    {q:"‰ªñÂú®ÂÅö‰ªÄ‰πàÔºütƒÅ z√†i zu√≤ sh√©nme?", opts:["‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£","‡πÄ‡∏Ç‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏ô","‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏Ñ‡∏£"], ans:0},
    {q:"ÊòéÂ§©ËßÅ„ÄÇm√≠ngtiƒÅn ji√†n„ÄÇ", opts:["‡∏û‡∏ö‡∏Å‡∏±‡∏ô‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ","‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô","‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤"], ans:0},
    {q:"Â•πÂæàÊºÇ‰∫Æ„ÄÇtƒÅ hƒõn pi√†oliang„ÄÇ", opts:["‡πÄ‡∏ò‡∏≠‡∏™‡∏ß‡∏¢‡∏°‡∏≤‡∏Å","‡πÄ‡∏ò‡∏≠‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å","‡πÄ‡∏ò‡∏≠‡∏≠‡πâ‡∏ß‡∏ô‡∏°‡∏≤‡∏Å"], ans:0},
    {q:"‰Ω†ÂñúÊ¨¢‰ªÄ‰πàÈ¢úËâ≤Ôºün«ê x«êhuƒÅn sh√©nme y√°ns√®?", opts:["‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏≠‡∏ö‡∏™‡∏µ‡∏≠‡∏∞‡πÑ‡∏£","‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô","‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£"], ans:0},
    {q:"‰ªñÂú®ÂêÉÈ•≠„ÄÇtƒÅ z√†i chƒ´f√†n„ÄÇ", opts:["‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß","‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ô‡∏≠‡∏ô","‡πÄ‡∏Ç‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πà‡∏á"], ans:0},
    {q:"‰Ω†Âú®Âì™ÂÑøÔºün«ê z√†i n«ér?", opts:["‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô","‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£","‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£"], ans:0},
    {q:"ÊàëÊúâ‰∏ÄÂè™Áãó„ÄÇw«í y«íu y√¨ zhƒ´ g«íu„ÄÇ", opts:["‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ï‡∏±‡∏ß","‡∏â‡∏±‡∏ô‡∏°‡∏µ‡πÅ‡∏°‡∏ß‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ï‡∏±‡∏ß","‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏±‡∏ï‡∏ß‡πå"], ans:0},
    {q:"‰Ω†ÂÆ∂ÊúâÂá†Âè£‰∫∫Ôºün«ê jiƒÅ y«íu j«ê k«íu r√©n?", opts:["‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏Ñ‡∏ô","‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô","‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡∏ç‡πà‡πÑ‡∏´‡∏°"], ans:0},
    {q:"‰ªñÊòØÊàëÁöÑÊúãÂèã„ÄÇtƒÅ sh√¨ w«í de p√©ngyou„ÄÇ", opts:["‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô","‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏µ‡πà‡∏ä‡∏≤‡∏¢‡∏â‡∏±‡∏ô","‡πÄ‡∏Ç‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏π‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô"], ans:0},
    {q:"ËØ∑Âùê„ÄÇq«êng zu√≤„ÄÇ", opts:["‡πÄ‡∏ä‡∏¥‡∏ç‡∏ô‡∏±‡πà‡∏á","‡πÄ‡∏ä‡∏¥‡∏ç‡∏Å‡∏¥‡∏ô","‡πÄ‡∏ä‡∏¥‡∏ç‡πÄ‡∏Ç‡πâ‡∏≤"], ans:0},
    {q:"‰∏çË¶ÅËØ¥ËØù„ÄÇb√πy√†o shu≈çhu√†„ÄÇ", opts:["‡∏≠‡∏¢‡πà‡∏≤‡∏û‡∏π‡∏î","‡∏≠‡∏¢‡πà‡∏≤‡∏Å‡∏¥‡∏ô","‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏ô"], ans:0},
    {q:"Ë∞¢Ë∞¢ËÄÅÂ∏à„ÄÇxi√®xi√® l«éoshƒ´„ÄÇ", opts:["‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π","‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏π","‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏π"], ans:0}
  ]
};

/* ====== ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏£‡∏∞‡∏ö‡∏ö ====== */
let setName = "";          // "YCT1" or "YCT2"
let modePhase = "";        // "listen" or "read"
let orderList = [];        // ‡∏Ñ‡∏¥‡∏ß‡∏Ç‡∏≠‡∏á object ‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏≥ (‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏ü‡∏±‡∏á‡πÅ‡∏•‡∏∞‡∏≠‡πà‡∏≤‡∏ô ‡πÅ‡∏ï‡πà‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏ó‡∏µ‡∏•‡∏∞ phase)
let currentIndex = 0;      // index ‡πÉ‡∏ô orderList
let timerId = null;
let timeLeft = 60;
let totalQuestions = 0;
let rawCorrect = 0;
let answersRecord = [];    // {q, correct, chosen, phase, idx}

/* TTS configuration: ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á (‡∏ï‡∏≠‡∏ö B) */
let selectedGender = "female";

/* ====== Flow control ====== */
function beginSet(which){
  setName = which;
  // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏¥‡∏™‡∏ï‡πå‡πÅ‡∏ö‡∏ö: ‡∏ü‡∏±‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡πà‡∏≤‡∏ô
  if(which === "YCT1"){
    orderList = [
      ...questions.YCT1_listen.map((x,i)=>({...x, phase:'listen', idx:i})),
      ...questions.YCT1_read.map((x,i)=>({...x, phase:'read', idx:i}))
    ];
  } else {
    orderList = [
      ...questions.YCT2_listen.map((x,i)=>({...x, phase:'listen', idx:i})),
      ...questions.YCT2_read.map((x,i)=>({...x, phase:'read', idx:i}))
    ];
  }
  totalQuestions = orderList.length;
  currentIndex = 0;
  rawCorrect = 0;
  answersRecord = [];
  showQuizScreen();
  showQuestion();
}

/* ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö */
function showQuizScreen(){
  document.getElementById('startScreen').classList.add('hidden');
  document.getElementById('leaderboardScreen').classList.add('hidden');
  document.getElementById('teacherScreen').classList.add('hidden');
  document.getElementById('resultScreen').classList.add('hidden');
  document.getElementById('quizScreen').classList.remove('hidden');
}

/* ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô */
function showQuestion(){
  clearInterval(timerId);
  timeLeft = 60;
  updateTimerUI();

  // ‡πÅ‡∏™‡∏î‡∏á part label (‡∏ü‡∏±‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡πà‡∏≤‡∏ô)
  const current = orderList[currentIndex];
  const partLabel = document.getElementById('partLabel');
  partLabel.innerText = `${setName} ‚Äî ${current.phase === 'listen' ? 'Âê¨Âäõ (‡∏ü‡∏±‡∏á)' : 'ÈòÖËØª (‡∏≠‡πà‡∏≤‡∏ô)'} ‡∏Ç‡πâ‡∏≠ ${currentIndex+1}/${totalQuestions}`;

  // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ü‡∏±‡∏á ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏•‡πà‡∏ô TTS ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÇ‡∏ä‡∏ß‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏î‡πâ)
  const qb = document.getElementById('questionBox');
  qb.innerHTML = `
    <div class="question"><b>‡∏Ç‡πâ‡∏≠ ${currentIndex+1}:</b> ${ current.phase === 'listen' ? '(‡∏ü‡∏±‡∏á‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á)' : current.q }</div>
    <div style="margin-bottom:8px;">
      <button class="play-btn" onclick="playCurrentTTS()">üîä ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
      <span class="small" style="margin-left:8px;">(‡∏Å‡∏î‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ü‡∏±‡∏á‡∏ã‡πâ‡∏≥)</span>
    </div>
    <div class="options">${ current.opts.map((o, idx) => `<button onclick="choose(${idx})">${o}</button>`).join('') }</div>
  `;

  // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô listening ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πà‡∏ô TTS ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
  if(current.phase === 'listen'){
    // ‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡πà‡∏ô
    setTimeout(()=>playCurrentTTS(), 250);
  }

  // start timer
  timerId = setInterval(()=>{
    timeLeft--;
    updateTimerUI();
    if(timeLeft <= 0){
      clearInterval(timerId);
      recordNoAnswerAndNext();
    }
  },1000);
}

/* ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï UI timer */
function updateTimerUI(){
  document.getElementById('timer').innerText = '‡πÄ‡∏ß‡∏•‡∏≤: ' + timeLeft;
}

/* ‡πÄ‡∏•‡πà‡∏ô TTS ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏†‡∏≤‡∏©‡∏≤: ‡∏à‡∏µ‡∏ô) */
function playCurrentTTS(){
  if(!window.speechSynthesis) return alert('‡πÄ‡∏ö‡∏£‡∏≤‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö SpeechSynthesis (TTS)');
  const current = orderList[currentIndex];
  const text = current.q; // ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏à‡∏µ‡∏ô + pinyin ‡πÉ‡∏ô q string
  const utter = new SpeechSynthesisUtterance(text);
  // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏à‡∏µ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏†‡∏≤‡∏©‡∏≤ zh ‡∏´‡∏£‡∏∑‡∏≠ default
  const voices = speechSynthesis.getVoices();
  // ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å voice ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô‡πÅ‡∏•‡∏∞‡∏î‡∏π‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô female ‡∏à‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠
  let chosen = voices.find(v => v.lang.startsWith('zh') && /female|Female|Â•≥|Google.*China|Mei|Yun/.test(v.name));
  if(!chosen) chosen = voices.find(v => v.lang.startsWith('zh'));
  if(!chosen) chosen = voices.find(v => v.lang.startsWith('zh-CN') || v.lang.startsWith('zh-TW'));
  if(chosen) utter.voice = chosen;
  // ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß/‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏ü‡∏±‡∏á‡∏ä‡∏±‡∏î)
  utter.rate = 0.95;
  utter.pitch = 1.0;
  speechSynthesis.cancel(); // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏Å‡πà‡∏≠‡∏ô
  speechSynthesis.speak(utter);
}

/* ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö */
function choose(choiceIdx){
  clearInterval(timerId);
  const current = orderList[currentIndex];
  const btns = document.querySelectorAll('.options button');
  // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏µ (‡∏ñ‡∏π‡∏Å/‡∏ú‡∏¥‡∏î/‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏à‡∏£‡∏¥‡∏á)
  btns.forEach((b, i)=>{
    b.disabled = true;
    if(i === current.ans) { b.classList.add('correct'); }
    if(i === choiceIdx && i !== current.ans) { b.classList.add('wrong'); }
    // ‡∏ñ user ‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å (i === current.ans && choiceIdx === i)
  });
  // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•
  const chosenText = current.opts[choiceIdx] ?? "‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö";
  answersRecord.push({
    q: current.q,
    correct: current.opts[current.ans],
    chosen: chosenText,
    phase: current.phase
  });
  if(choiceIdx === current.ans) rawCorrect++;

  // ‡∏£‡∏≠ 800ms ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
  setTimeout(()=>{ currentIndex++; if(currentIndex < totalQuestions) showQuestion(); else finishAll(); }, 800);
}

/* ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ (‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏≠‡∏ö) */
function recordNoAnswerAndNext(){
  const current = orderList[currentIndex];
  const btns = document.querySelectorAll('.options button');
  btns.forEach((b,i)=>{ b.disabled=true; if(i===current.ans) b.classList.add('correct'); });
  answersRecord.push({
    q: current.q,
    correct: current.opts[current.ans],
    chosen: "‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö",
    phase: current.phase
  });
  // ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
  setTimeout(()=>{ currentIndex++; if(currentIndex < totalQuestions) showQuestion(); else finishAll(); }, 800);
}

/* ‡∏à‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏û‡∏≤‡∏£‡πå‡∏ó */
function finishAll(){
  clearInterval(timerId);
  document.getElementById('quizScreen').classList.add('hidden');
  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
  const raw = rawCorrect; // ‡πÄ‡∏ä‡πà‡∏ô 23
  const total = totalQuestions; // 35 ‡∏´‡∏£‡∏∑‡∏≠ 40
  // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏ï‡πá‡∏° 200 (‡∏õ‡∏±‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°)
  const real = Math.round((raw / total) * 200);
  const pass = real >= 120;
  // ‡πÅ‡∏™‡∏î‡∏á UI
  document.getElementById('resultScreen').classList.remove('hidden');
  document.getElementById('scoreSummary').innerHTML = `<b>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏î‡∏¥‡∏ö:</b> ${raw}/${total} &nbsp;&nbsp; <b>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á:</b> ${real}/200`;
  document.getElementById('passFail').innerHTML = pass ? `<span class="result-good">‡∏ú‡πà‡∏≤‡∏ô ‚úÖ</span>` : `<span class="result-bad">‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‚ùå</span>`;

  // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏â‡∏•‡∏¢
  const answerDiv = document.getElementById('answerList');
  answerDiv.innerHTML = answersRecord.map((a,i)=>`
    <div style="padding:8px;border-radius:8px;margin-bottom:6px;background:#fbfeff;border:1px solid #eaf6ff;">
      <div><b>‡∏Ç‡πâ‡∏≠ ${i+1} (${a.phase})</b></div>
      <div class="small">${a.q}</div>
      <div style="margin-top:6px;">‚úÖ ‡∏ñ‡∏π‡∏Å: <b style="color:${'#1976D2'}">${a.correct}</b> &nbsp;&nbsp; üìù ‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≠‡∏ö: <b>${a.chosen}</b></div>
    </div>
  `).join('');
  // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏ß‡πâ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡πÉ‡∏ô DOM (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å)
  document.getElementById('resultScreen').dataset.raw = raw;
  document.getElementById('resultScreen').dataset.real = real;
  document.getElementById('resultScreen').dataset.total = total;
}

/* ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà localStorage */
function saveResult(){
  const name = document.getElementById('studentName').value.trim();
  if(!name) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å');
  const raw = parseInt(document.getElementById('resultScreen').dataset.raw,10) || 0;
  const real = parseInt(document.getElementById('resultScreen').dataset.real,10) || 0;
  const total = parseInt(document.getElementById('resultScreen').dataset.total,10) || 0;
  const now = new Date();
  const timeStr = now.toLocaleString('th-TH');
  const rec = { name, set: setName, raw:`${raw}/${total}`, real:`${real}/200`, score: real, time: timeStr };
  const arr = JSON.parse(localStorage.getItem('yctScores') || '[]');
  arr.push(rec);
  // sort by score desc
  arr.sort((a,b)=> (b.score||0) - (a.score||0));
  localStorage.setItem('yctScores', JSON.stringify(arr));
  alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!');
  backToHome();
}

/* ‡πÅ‡∏™‡∏î‡∏á Leaderboard */
function showLeaderboard(){
  document.getElementById('startScreen').classList.add('hidden');
  document.getElementById('quizScreen').classList.add('hidden');
  document.getElementById('resultScreen').classList.add('hidden');
  document.getElementById('teacherScreen').classList.add('hidden');
  document.getElementById('leaderboardScreen').classList.remove('hidden');
  const arr = JSON.parse(localStorage.getItem('yctScores') || '[]');
  const tbody = document.querySelector('#leaderboardTable tbody');
  if(arr.length === 0){ tbody.innerHTML = '<tr><td colspan="5">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</td></tr>'; return; }
  tbody.innerHTML = arr.map((r,i)=>`<tr>
    <td>${escapeHtml(r.name)}</td>
    <td>${r.raw}</td>
    <td>${r.real}</td>
    <td>${r.time}</td>
    <td><button onclick="deleteScore(${i})" class="ghost">‡∏•‡∏ö</button></td>
  </tr>`).join('');
}

/* ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏Å leaderboard */
function deleteScore(i){
  if(!confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÄ‡∏£‡∏Ñ‡∏Ñ‡∏≠‡∏£‡πå‡∏î‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) return;
  const arr = JSON.parse(localStorage.getItem('yctScores') || '[]');
  arr.splice(i,1);
  localStorage.setItem('yctScores', JSON.stringify(arr));
  showLeaderboard();
}

/* ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (leaderboard) */
function clearLocalScores(){
  if(!confirm('‡∏•‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å localStorage?')) return;
  localStorage.removeItem('yctScores');
  showLeaderboard();
}

/* ‡πÇ‡∏´‡∏°‡∏î‡∏Ñ‡∏£‡∏π (‡∏£‡∏´‡∏±‡∏™ 2222) */
function enterTeacherMode(){
  const pw = prompt('‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Ñ‡∏£‡∏π:');
  if(pw !== '2222') return alert('‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
  document.getElementById('startScreen').classList.add('hidden');
  document.getElementById('leaderboardScreen').classList.add('hidden');
  document.getElementById('resultScreen').classList.add('hidden');
  document.getElementById('teacherScreen').classList.remove('hidden');
  renderTeacherTable();
}

function renderTeacherTable(){
  const arr = JSON.parse(localStorage.getItem('yctScores') || '[]');
  const tbody = document.querySelector('#teacherTable tbody');
  if(arr.length === 0){ tbody.innerHTML = '<tr><td colspan="5">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏£‡∏Ñ‡∏Ñ‡∏≠‡∏£‡πå‡∏î</td></tr>'; return; }
  tbody.innerHTML = arr.map((r,i)=>`<tr>
    <td contenteditable onblur="updateTeacher(${i},'name',this.innerText)">${escapeHtml(r.name)}</td>
    <td contenteditable onblur="updateTeacher(${i},'raw',this.innerText)">${r.raw}</td>
    <td contenteditable onblur="updateTeacher(${i},'real',this.innerText)">${r.real}</td>
    <td contenteditable onblur="updateTeacher(${i},'time',this.innerText)">${r.time}</td>
    <td>
      <button onclick="teacherDelete(${i})" class="ghost">‡∏•‡∏ö</button>
    </td>
  </tr>`).join('');
}

function updateTeacher(i, field, val){
  const arr = JSON.parse(localStorage.getItem('yctScores') || '[]');
  if(!arr[i]) return;
  // ‡∏ñ‡πâ‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏Å‡πâ real ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï score numeric
  arr[i][field] = val;
  if(field === 'real'){
    // real ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö "123/200" -> score: 123
    const m = String(val).match(/(\d+)/);
    arr[i].score = m ? parseInt(m[1],10) : (arr[i].score||0);
  }
  localStorage.setItem('yctScores', JSON.stringify(arr));
  renderTeacherTable();
}
function teacherDelete(i){
  if(!confirm('‡∏•‡∏ö‡πÄ‡∏£‡∏Ñ‡∏Ñ‡∏≠‡∏£‡πå‡∏î‡∏ô‡∏µ‡πâ?')) return;
  const arr = JSON.parse(localStorage.getItem('yctScores') || '[]');
  arr.splice(i,1);
  localStorage.setItem('yctScores', JSON.stringify(arr));
  renderTeacherTable();
}
function addRecord(){
  const arr = JSON.parse(localStorage.getItem('yctScores') || '[]');
  const now = new Date();
  arr.push({ name: '‡πÉ‡∏´‡∏°‡πà', raw: '0/0', real: '0/200', score: 0, time: now.toLocaleString('th-TH')});
  localStorage.setItem('yctScores', JSON.stringify(arr));
  renderTeacherTable();
}

/* ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å */
function backToHome(){
  // reset speech cancel
  if(window.speechSynthesis) window.speechSynthesis.cancel();
  document.getElementById('startScreen').classList.remove('hidden');
  document.getElementById('quizScreen').classList.add('hidden');
  document.getElementById('resultScreen').classList.add('hidden');
  document.getElementById('leaderboardScreen').classList.add('hidden');
  document.getElementById('teacherScreen').classList.add('hidden');
}

/* Utility */
function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

/* ‡∏´‡∏≤‡∏Å‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏µ voices ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏° ‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏ã‡πâ‡∏≥‡πÄ‡∏°‡∏∑‡πà‡∏≠ voiceschanged */
if(window.speechSynthesis){
  speechSynthesis.onvoiceschanged = () => { /* ready */ };
}

/* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î) */
// window.onbeforeunload = function() { return "‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≠‡∏Å ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"; };
</script>
</body>
</html>
