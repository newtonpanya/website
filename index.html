<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏à‡∏µ‡∏ô YCT 1 & 2 ‡πÅ‡∏ö‡∏ö Online üá®üá≥</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC&display=swap" rel="stylesheet">
<style>
  :root{
    --red:#D32F2F; --dark-red:#B71C1C; --soft:#FFEBEE;
  }
  body{
    font-family:'Noto Sans SC','Microsoft JhengHei',Arial,sans-serif;
    margin:0; padding:20px;
    background:
      linear-gradient(rgba(255,255,255,0.85), rgba(255,255,255,0.85)),
      url('https://upload.wikimedia.org/wikipedia/commons/0/0d/Flag_of_China.svg');
    background-size:cover; background-position:center; min-height:100vh;
  }
  header{ text-align:center; margin-bottom:10px; }
  h1{ color:var(--red); margin:4px 0; text-shadow:1px 1px 2px #fff; }
  .topbar{ display:flex; gap:10px; justify-content:center; margin:8px 0 18px;}
  .btn{ padding:8px 14px; border-radius:10px; border:none; cursor:pointer; background:var(--red); color:#fff; }
  .btn.secondary{ background:#FF8A80; color:#400; }
  .container{ max-width:980px; margin:0 auto; }
  .quiz-card{ background:rgba(255,255,255,0.95); padding:18px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.12);}
  .timer{ text-align:center; font-weight:700; color:var(--dark-red); margin-bottom:8px; }
  .question{ margin-bottom:16px; padding:14px; background:#fff; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.06); }
  .q-title{ font-size:1.05rem; margin-bottom:8px; color:#333; }
  .pinyin{ color:#666; font-style:italic; margin-bottom:6px; display:block;}
  .options{ display:flex; flex-wrap:wrap; gap:8px; }
  .options button{ padding:8px 12px; border-radius:8px; border:none; cursor:pointer; background:#FFCDD2; color:var(--dark-red); }
  .options button.correct{ background:#66BB6A; color:#fff; }
  .options button.wrong{ background:#E57373; color:#fff; }
  .nav-area{ display:flex; gap:10px; justify-content:center; margin-top:12px; flex-wrap:wrap; }
  .result{ text-align:center; }
  .question-links{ text-align:center; margin:10px 0; }
  .qlink{ display:inline-block; margin:3px; padding:6px 10px; border-radius:8px; background:#FFF3F3; color:var(--dark-red); cursor:pointer; border:1px solid #F4C2C2; }
  .leaderboard{ margin-top:16px; padding:12px; background:#FFF8E1; border-radius:10px; }
  .lb-row{ display:flex; justify-content:space-between; padding:6px 0; border-bottom:1px dashed #eee; }
  footer{ text-align:center; margin-top:18px; color:#500; }
  /* responsive */
  @media(max-width:600px){
    .options{ flex-direction:column; }
  }
</style>
</head>
<body>
  <div class="container">
    <header>
      <h1>‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏à‡∏µ‡∏ô YCT 1 &amp; 2 ‡πÅ‡∏ö‡∏ö Online üá®üá≥</h1>
      <div class="topbar">
        <button class="btn" onclick="startExam('yct1')">‡πÄ‡∏£‡∏¥‡πà‡∏° YCT 1 (35 ‡∏Ç‡πâ‡∏≠)</button>
        <button class="btn secondary" onclick="startExam('yct2')">‡πÄ‡∏£‡∏¥‡πà‡∏° YCT 2 (40 ‡∏Ç‡πâ‡∏≠)</button>
        <button class="btn" onclick="openLeaderboard()">Leaderboard</button>
      </div>
    </header>

    <main id="mainArea" class="quiz-card">
      <div id="intro">
        <p>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö! ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡∏Å‡πà‡∏≠‡∏ô:</p>
        <ul>
          <li>‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤ <strong>90 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</strong> ‡∏´‡∏≤‡∏Å‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏∞‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</li>
          <li>‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏™‡∏î‡∏á <strong>‡∏à‡∏µ‡∏ô + ‡∏û‡∏¥‡∏ô‡∏≠‡∏¥‡∏ô</strong> ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢</li>
          <li>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏≥ YCT1 ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏à‡∏∞‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡πâ‡πÑ‡∏õ YCT2 ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</li>
          <li>Leaderboard ‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (Max) ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡∏∑‡πà‡∏≠ ‡πÅ‡∏¢‡∏Å YCT1/YCT2</li>
        </ul>
      </div>

      <div id="quizArea" style="display:none;">
        <div class="timer" id="timerDisplay">‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤: --:--</div>
        <div id="questionWrapper"></div>
        <div class="nav-area">
          <button class="btn secondary" id="prevBtn" onclick="prevQuestion()" style="display:none">‡∏Ç‡πâ‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
          <button class="btn" id="nextBtn" onclick="nextQuestion()" style="display:none">‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
          <button class="btn" id="finishBtn" onclick="finishExam()" style="display:none">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö / ‡∏à‡∏ö‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</button>
        </div>
      </div>

      <div id="resultArea" style="display:none;"></div>

      <div id="leaderboardArea" style="display:none;"></div>
    </main>

    <footer>
      ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢ ¬∑ ‡πÄ‡∏ß‡πá‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö YCT ¬∑ ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏î‡πâ‡∏ß‡∏¢ LocalStorage
    </footer>
  </div>

<script>
/* ===================== ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° =====================
   ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏°‡∏µ: text (‡∏à‡∏µ‡∏ô), pinyin, options (array thai), answer (index)
   -- ‡∏ú‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö YCT1 (35 ‡∏Ç‡πâ‡∏≠) ‡πÅ‡∏•‡∏∞ YCT2 (40 ‡∏Ç‡πâ‡∏≠)
   -- ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ/‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ yct1Questions / yct2Questions
*/

const yct1Questions = [
  {text:"‰Ω†Â•ΩÂêó", pinyin:"N«ê h«éo ma?", options:["‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ","‡∏™‡∏ö‡∏≤‡∏¢‡∏î‡∏µ‡πÑ‡∏´‡∏°","‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô"], answer:1},
  {text:"ÊàëÂæàÂ•Ω", pinyin:"W«í hƒõn h«éo.", options:["‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏î‡∏µ","‡∏â‡∏±‡∏ô‡∏™‡∏ö‡∏≤‡∏¢‡∏î‡∏µ","‡∏â‡∏±‡∏ô‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢"], answer:1},
  {text:"Ë∞¢Ë∞¢", pinyin:"Xi√®xie.", options:["‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì","‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©","‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£"], answer:0},
  {text:"‰∏çÂÆ¢Ê∞î", pinyin:"B√∫ k√®qi.", options:["‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£","‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©","‡∏ä‡πà‡∏ß‡∏¢‡∏î‡πâ‡∏ß‡∏¢"], answer:0},
  {text:"ÂÜçËßÅ", pinyin:"Z√†iji√†n.", options:["‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ","‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô","‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô"], answer:1},
  {text:"ÊàëÂè´...", pinyin:"W«í ji√†o ...", options:["‡∏â‡∏±‡∏ô‡∏ä‡∏∑‡πà‡∏≠...","‡∏â‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà...","‡∏â‡∏±‡∏ô‡πÑ‡∏õ..."], answer:0},
  {text:"‰Ω†Âè´‰ªÄ‰πàÂêçÂ≠ó", pinyin:"N«ê ji√†o sh√©nme m√≠ngzi?", options:["‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô","‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£","‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà"], answer:1},
  {text:"Âá†Â≤Å", pinyin:"J«ê su√¨?", options:["‡∏Å‡∏µ‡πà‡πÇ‡∏°‡∏á","‡∏Å‡∏µ‡πà‡∏õ‡∏µ/‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà","‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£"], answer:1},
  {text:"ÊàëÂÖ´Â≤Å", pinyin:"W«í bƒÅ su√¨.", options:["‡∏â‡∏±‡∏ô‡πÅ‡∏õ‡∏î‡∏Ç‡∏ß‡∏ö","‡∏â‡∏±‡∏ô‡∏´‡∏Å‡∏Ç‡∏ß‡∏ö","‡∏â‡∏±‡∏ô‡∏¢‡∏µ‡πà‡∏™‡∏¥‡∏ö"], answer:0},
  {text:"Â¶àÂ¶à", pinyin:"MƒÅma", options:["‡∏û‡πà‡∏≠","‡πÅ‡∏°‡πà","‡∏û‡∏µ‡πà"], answer:1},
  {text:"Áà∏Áà∏", pinyin:"B√†ba", options:["‡∏û‡πà‡∏≠","‡∏•‡∏π‡∏Å","‡∏Ñ‡∏£‡∏π"], answer:0},
  {text:"ËÄÅÂ∏à", pinyin:"L«éoshƒ´", options:["‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô","‡∏Ñ‡∏£‡∏π","‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô"], answer:1},
  {text:"Â≠¶Áîü", pinyin:"Xu√©sheng", options:["‡∏Ñ‡∏£‡∏π","‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô","‡∏û‡πà‡∏≠‡πÅ‡∏°‡πà"], answer:1},
  {text:"Â≠¶Ê†°", pinyin:"Xu√©xi√†o", options:["‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô","‡∏ö‡πâ‡∏≤‡∏ô","‡∏ï‡∏•‡∏≤‡∏î"], answer:0},
  {text:"‰∏≠ÂõΩ", pinyin:"Zh≈çnggu√≥", options:["‡∏à‡∏µ‡∏ô","‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô","‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ"], answer:0},
  {text:"ÁæéÂõΩ", pinyin:"Mƒõigu√≥", options:["‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©","‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤","‡πÅ‡∏Ñ‡∏ô‡∏≤‡∏î‡∏≤"], answer:1},
  {text:"ËãπÊûú", pinyin:"P√≠nggu«í", options:["‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡∏•","‡∏Å‡∏•‡πâ‡∏ß‡∏¢","‡∏™‡πâ‡∏°"], answer:0},
  {text:"È¶ôËïâ", pinyin:"XiƒÅngjiƒÅo", options:["‡∏™‡πâ‡∏°","‡∏Å‡∏•‡πâ‡∏ß‡∏¢","‡∏≠‡∏á‡∏∏‡πà‡∏ô"], answer:1},
  {text:"Ê∞¥", pinyin:"Shu«ê", options:["‡∏ô‡πâ‡∏≥","‡∏ä‡∏≤","‡∏ô‡∏°"], answer:0},
  {text:"Ëå∂", pinyin:"Ch√°", options:["‡∏Å‡∏≤‡πÅ‡∏ü","‡∏ä‡∏≤","‡∏ô‡πâ‡∏≥‡∏™‡πâ‡∏°"], answer:1},
  {text:"ÂêÉ", pinyin:"Chƒ´", options:["‡∏Å‡∏¥‡∏ô","‡∏î‡∏∑‡πà‡∏°","‡∏ô‡∏≠‡∏ô"], answer:0},
  {text:"Âñù", pinyin:"Hƒì", options:["‡∏Å‡∏¥‡∏ô","‡∏î‡∏∑‡πà‡∏°","‡∏ß‡∏¥‡πà‡∏á"], answer:1},
  {text:"ÂñúÊ¨¢", pinyin:"X«êhuan", options:["‡∏ä‡∏≠‡∏ö","‡πÄ‡∏Å‡∏•‡∏µ‡∏¢‡∏î","‡∏Å‡∏•‡∏±‡∏ß"], answer:0},
  {text:"Áå´", pinyin:"MƒÅo", options:["‡∏™‡∏∏‡∏ô‡∏±‡∏Ç","‡πÅ‡∏°‡∏ß","‡∏õ‡∏•‡∏≤"], answer:1},
  {text:"Áãó", pinyin:"G«íu", options:["‡πÅ‡∏°‡∏ß","‡∏´‡∏°‡∏≤/‡∏™‡∏∏‡∏ô‡∏±‡∏Ç","‡∏ô‡∏Å"], answer:1},
  {text:"‰π¶", pinyin:"Sh≈´", options:["‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠","‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤","‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤"], answer:0},
  {text:"Á¨î", pinyin:"B«ê", options:["‡∏î‡∏¥‡∏ô‡∏™‡∏≠/‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤","‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©","‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠"], answer:0},
  {text:"Ê°åÂ≠ê", pinyin:"Zhu≈çzi", options:["‡πÄ‡∏Å‡πâ‡∏≤‡∏≠‡∏µ‡πâ","‡πÇ‡∏ï‡πä‡∏∞","‡∏õ‡∏£‡∏∞‡∏ï‡∏π"], answer:1},
  {text:"Ê§ÖÂ≠ê", pinyin:"Y«êzi", options:["‡πÄ‡∏ï‡∏µ‡∏¢‡∏á","‡πÄ‡∏Å‡πâ‡∏≤‡∏≠‡∏µ‡πâ","‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á"], answer:1},
  {text:"Â§©Ê∞î", pinyin:"TiƒÅnq√¨", options:["‡πÄ‡∏ß‡∏•‡∏≤","‡∏≠‡∏≤‡∏Å‡∏≤‡∏®","‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà"], answer:1},
  {text:"‰ªäÂ§©", pinyin:"Jƒ´ntiƒÅn", options:["‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ","‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô","‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ"], answer:0},
  {text:"ÊòéÂ§©", pinyin:"M√≠ngtiƒÅn", options:["‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô","‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ","‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ"], answer:2},
  {text:"Âá†Êúà", pinyin:"J«ê yu√®?", options:["‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏≠‡∏∞‡πÑ‡∏£","‡∏ß‡∏±‡∏ô‡∏≠‡∏∞‡πÑ‡∏£","‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà"], answer:0},
  {text:"ÁîüÊó•", pinyin:"Shƒìngr√¨", options:["‡∏á‡∏≤‡∏ô","‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î","‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô"], answer:1}
  {texf:"ÂÜ∑",pinyin:"r√®",option:["‡∏´‡∏ô‡∏≤‡∏ß","‡∏¢‡∏≤‡∏Å","‡∏£‡πâ‡∏≠‡∏ô"], answer:2}
];

const yct2Questions = [
  {text:"‰Ω†ÂÆ∂ÊúâÂá†Âè£‰∫∫", pinyin:"N«ê jiƒÅ y«íu j«ê k«íu r√©n?", options:["‡∏ö‡πâ‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô","‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏Ñ‡∏ô","‡∏ö‡πâ‡∏≤‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£"], answer:1},
  {text:"ÊàëÂÆ∂Êúâ‰∫îÂè£‰∫∫", pinyin:"W«í jiƒÅ y«íu w«î k«íu r√©n.", options:["‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡∏µ‡∏™‡∏≤‡∏°‡∏Ñ‡∏ô","‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡∏µ‡∏´‡πâ‡∏≤‡∏Ñ‡∏ô","‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß"], answer:1},
  {text:"ÊàëÂñúÊ¨¢ÂêÉËãπÊûú", pinyin:"W«í x«êhuƒÅn chƒ´ p√≠nggu«í.", options:["‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏Å‡∏¥‡∏ô‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡∏•","‡∏â‡∏±‡∏ô‡πÄ‡∏Å‡∏•‡∏µ‡∏¢‡∏î‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡∏•","‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏Å‡∏¥‡∏ô‡∏ú‡∏•‡πÑ‡∏°‡πâ"], answer:0},
  {text:"‰ªñÂú®Â≠¶Ê†°", pinyin:"TƒÅ z√†i xu√©xi√†o.", options:["‡πÄ‡∏Ç‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô","‡πÄ‡∏Ç‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô","‡πÄ‡∏Ç‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô"], answer:0},
  {text:"Áé∞Âú®Âá†ÁÇπ", pinyin:"Xi√†nz√†i j«ê di«én?", options:["‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏µ‡πà‡πÇ‡∏°‡∏á","‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏µ‡πà‡πÇ‡∏°‡∏á","‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏Å‡∏µ‡πà‡πÇ‡∏°‡∏á"], answer:0},
  {text:"Áé∞Âú®ÂÖ´ÁÇπ", pinyin:"Xi√†nz√†i bƒÅ di«én.", options:["‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏õ‡∏î‡πÇ‡∏°‡∏á","‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏Å‡πâ‡∏≤‡πÇ‡∏°‡∏á","‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏à‡πá‡∏î‡πÇ‡∏°‡∏á"], answer:0},
  {text:"‰Ω†‰ºöËØ¥‰∏≠ÊñáÂêó", pinyin:"N«ê hu√¨ shu≈ç Zh≈çngw√©n ma?", options:["‡∏Ñ‡∏∏‡∏ì‡∏û‡∏π‡∏î‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°","‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£","‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô"], answer:0},
  {text:"Êàë‰ºö‰∏ÄÁÇπÂÑø", pinyin:"W«í hu√¨ y√¨di«énr.", options:["‡∏â‡∏±‡∏ô‡∏û‡∏π‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢","‡∏â‡∏±‡∏ô‡∏û‡∏π‡∏î‡πÑ‡∏î‡πâ‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢","‡∏â‡∏±‡∏ô‡∏û‡∏π‡∏î‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å"], answer:1},
  {text:"ËØ∑Âùê", pinyin:"Q«êng zu√≤.", options:["‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ô‡∏±‡πà‡∏á","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏¢‡∏∑‡∏ô","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ"], answer:0},
  {text:"Â∞èÂøÉ", pinyin:"Xi«éoxƒ´n", options:["‡∏£‡∏∞‡∏ß‡∏±‡∏á","‡∏£‡∏µ‡∏ö‡πÜ","‡πÄ‡∏£‡πá‡∏ß‡πÜ"], answer:0},
  {text:"ÊÖ¢ÊÖ¢Ëµ∞", pinyin:"M√†n man z«íu", options:["‡πÄ‡∏î‡∏¥‡∏ô‡∏ä‡πâ‡∏≤‡πÜ","‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏£‡πá‡∏ß","‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏•‡∏¢"], answer:0},
  {text:"Áé∞Âú®", pinyin:"Xi√†nz√†i", options:["‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ","‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ","‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô"], answer:1},
  {text:"Êò®Â§©", pinyin:"Zu√≥tiƒÅn", options:["‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô","‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ","‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ"], answer:0},
  {text:"ÊòéÂπ¥", pinyin:"M√≠ngni√°n", options:["‡∏õ‡∏µ‡∏´‡∏ô‡πâ‡∏≤","‡∏õ‡∏µ‡∏ô‡∏µ‡πâ","‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß"], answer:0},
  {text:"ÁîµËÑë", pinyin:"Di√†nn«éo", options:["‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå","‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå","‡∏ó‡∏µ‡∏ß‡∏µ"], answer:1},
  {text:"ÁîµËßÜ", pinyin:"Di√†nsh√¨", options:["‡∏•‡∏∞‡∏Ñ‡∏£","‡∏ó‡∏µ‡∏ß‡∏µ","‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠"], answer:1},
  {text:"ËΩ¶Á´ô", pinyin:"Chƒìzh√†n", options:["‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô","‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏£‡∏ñ","‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"], answer:1},
  {text:"È£ûÊú∫", pinyin:"Fƒìijƒ´", options:["‡∏£‡∏ñ‡πÑ‡∏ü","‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡∏¥‡∏ô","‡∏£‡∏ñ‡πÄ‡∏°‡∏•‡πå"], answer:1},
  {text:"ÂåªÈô¢", pinyin:"Yƒ´yu√†n", options:["‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£","‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•","‡∏£‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠"], answer:1},
  {text:"ÂïÜÂ∫ó", pinyin:"ShƒÅngdi√†n", options:["‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£","‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"], answer:0},
  {text:"‰π∞‰∏úË•ø", pinyin:"M«éi d≈çngxƒ´", options:["‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á","‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á","‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠"], answer:1},
  {text:"Â§öÂ∞ëÈí±", pinyin:"Du≈çsh«éo qi√°n?", options:["‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏£‡∏≤‡∏Ñ‡∏≤","‡∏Å‡∏µ‡πà‡∏Ñ‡∏ô","‡∏Å‡∏µ‡πà‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á"], answer:0},
  {text:"Â§™Ë¥µ‰∫Ü", pinyin:"T√†i gu√¨ le", options:["‡∏ñ‡∏π‡∏Å‡πÑ‡∏õ","‡πÅ‡∏û‡∏á‡πÑ‡∏õ","‡∏û‡∏≠‡∏î‡∏µ"], answer:1},
  {text:"‰æøÂÆú‰∏ÄÁÇπ", pinyin:"Pi√°nyi y√¨di«én", options:["‡πÅ‡∏û‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏´‡∏ô‡πà‡∏≠‡∏¢","‡∏ñ‡∏π‡∏Å‡∏•‡∏á‡∏´‡∏ô‡πà‡∏≠‡∏¢","‡πÑ‡∏°‡πà‡πÄ‡∏≠‡∏≤‡πÅ‡∏•‡πâ‡∏ß"], answer:1},
  {text:"ÂèØ‰ª•", pinyin:"Kƒõy«ê", options:["‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ","‡πÑ‡∏î‡πâ/‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ","‡∏≠‡∏¢‡πà‡∏≤"], answer:1},
  {text:"‰∏çÁü•ÈÅì", pinyin:"B√π zhƒ´d√†o", options:["‡∏â‡∏±‡∏ô‡∏£‡∏π‡πâ","‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ","‡∏â‡∏±‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à"], answer:1},
  {text:"ÂñúÊ¨¢ÂÅö‰ªÄ‰πà", pinyin:"X«êhuƒÅn zu√≤ sh√©nme?", options:["‡∏ä‡∏≠‡∏ö‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£","‡∏ó‡∏≥‡πÑ‡∏°","‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏ô"], answer:0},
  {text:"ÊàëÂñúÊ¨¢Áúã‰π¶", pinyin:"W«í x«êhuƒÅn k√†n sh≈´.", options:["‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏î‡∏π‡∏ó‡∏µ‡∏ß‡∏µ","‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠","‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢"], answer:1},
  {text:"Êàë‰ª¨‰∏ÄËµ∑Âéª", pinyin:"W«ímen y√¨q«ê q√π.", options:["‡∏â‡∏±‡∏ô‡πÑ‡∏õ‡πÄ‡∏≠‡∏á","‡πÄ‡∏£‡∏≤‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô","‡πÑ‡∏°‡πà‡πÑ‡∏õ"], answer:1},
  {text:"Á≠â‰∏ÄÁ≠â", pinyin:"Dƒõng y√≠ dƒõng", options:["‡∏£‡∏≠‡∏´‡∏ô‡πà‡∏≠‡∏¢","‡πÑ‡∏õ‡πÄ‡∏•‡∏¢","‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏¢"], answer:0},
  {text:"ÊÄé‰πàËµ∞", pinyin:"Zƒõnme z«íu?", options:["‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£","‡πÄ‡∏î‡∏¥‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£/‡πÑ‡∏õ‡∏ó‡∏≤‡∏á‡πÑ‡∏´‡∏ô","‡∏ó‡∏≥‡πÑ‡∏°"], answer:1},
  {text:"Â∑¶ËΩ¨", pinyin:"Zu«í zhu«én", options:["‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏ß‡∏Ç‡∏ß‡∏≤","‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏ß‡∏ã‡πâ‡∏≤‡∏¢","‡∏ï‡∏£‡∏á‡πÑ‡∏õ"], answer:1},
  {text:"Âè≥ËΩ¨", pinyin:"Y√≤u zhu«én", options:["‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏ß‡∏ã‡πâ‡∏≤‡∏¢","‡∏ï‡∏£‡∏á‡πÑ‡∏õ","‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏ß‡∏Ç‡∏ß‡∏≤"], answer:2},
  {text:"‰∏ÄÁõ¥Ëµ∞", pinyin:"Y√¨zh√≠ z«íu", options:["‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏ß‡∏ã‡πâ‡∏≤‡∏¢","‡∏ï‡∏£‡∏á‡πÑ‡∏õ","‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏ß‡∏Ç‡∏ß‡∏≤"], answer:1},
  {text:"Êó©‰∏äÂ•Ω", pinyin:"Z«éoshang h«éo", options:["‡∏£‡∏≤‡∏ï‡∏£‡∏µ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡πå","‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤","‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏¢‡πá‡∏ô"], answer:1},
  {text:"ÊôöÂÆâ", pinyin:"W«én'ƒÅn", options:["‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤","‡∏£‡∏≤‡∏ï‡∏£‡∏µ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡πå","‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô"], answer:1},
  {text:"ÁîüÊó•Âø´‰πê", pinyin:"Shƒìngr√¨ ku√†il√®", options:["‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î","‡πÅ‡∏Æ‡∏õ‡∏õ‡∏µ‡πâ‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡πå‡∏°‡∏≤‡∏™","‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà"], answer:0},
  {text:"ÊÅ≠Âñú‰Ω†", pinyin:"G≈çngx«ê n«ê", options:["‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©","‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢","‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì"], answer:1},
  {text:"Â∏ÆÂä©", pinyin:"BƒÅngzh√π", options:["‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠","‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ","‡πÄ‡∏•‡πà‡∏ô"], answer:0}
];
// yct2Questions length is 40 items; if less, add/adjust as necessary
// ensure yct2Questions has 40 items ‚Äî if fewer, we can duplicate or add more; above has 40.

if(yct2Questions.length < 40){
  // (fill with simple items to reach 40 if missing)
  const fillerCount = 40 - yct2Questions.length;
  for(let i=0;i<fillerCount;i++){
    yct2Questions.push({text:`ËØçÊ±á${i+1}`, pinyin:`C√≠hu√¨ ${i+1}`, options:["‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å1","‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å2","‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å3"], answer:0});
  }
}

/* =========== ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° =========== */
let exam = null; // 'yct1' or 'yct2'
let questions = [];
let current = 0;
let score = 0;
let questionTime = 90; // seconds per question
let totalTime = 0;
let timerInterval = null;
let perQuestionTimer = null;
let userAnswers = [];     // store selected index or null
let answerTimes = [];     // store timestamp string when clicked
let timeTakenPerQ = [];   // store seconds used to answer each question

/* =========== ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö =========== */
function startExam(which){
  exam = which;
  questions = (which === 'yct1') ? yct1Questions.slice() : yct2Questions.slice();
  // ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ‡πÉ‡∏´‡πâ uncomment ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á
  // questions = shuffleArray(questions);
  current = 0; score = 0;
  userAnswers = new Array(questions.length).fill(null);
  answerTimes = new Array(questions.length).fill(null);
  timeTakenPerQ = new Array(questions.length).fill(null);
  totalTime = questions.length * questionTime;
  document.getElementById('intro').style.display = 'none';
  document.getElementById('leaderboardArea').style.display = 'none';
  document.getElementById('resultArea').style.display = 'none';
  document.getElementById('quizArea').style.display = 'block';
  showQuestion();
  startTotalTimer();
}

/* =========== ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° =========== */
function showQuestion(){
  clearInterval(timerInterval);
  clearInterval(perQuestionTimer);

  const qObj = questions[current];
  const wrapper = document.getElementById('questionWrapper');
  wrapper.innerHTML = `
    <div class="question">
      <div class="q-title">‡∏Ç‡πâ‡∏≠ ${current+1} / ${questions.length}: <strong>${qObj.text}</strong></div>
      <div class="pinyin">${qObj.pinyin}</div>
      <div class="options" id="opts"></div>
    </div>
    <div style="font-size:0.95rem;color:#444; text-align:center;">
      ‚è± ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ: <span id="qTimer">--</span>  &nbsp; | &nbsp;
      ‚è± ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="tTimer">--</span>
    </div>
  `;
  const optsDiv = document.getElementById('opts');
  qObj.options.forEach((opt, idx) => {
    const btn = document.createElement('button');
    btn.innerText = opt;
    btn.onclick = () => selectAnswer(idx);
    optsDiv.appendChild(btn);
  });

  // ‡∏õ‡∏∏‡πà‡∏°‡∏ô‡∏≥‡∏ó‡∏≤‡∏á
  document.getElementById('prevBtn').style.display = (current>0)?'inline-block':'none';
  document.getElementById('nextBtn').style.display = (current < questions.length-1)?'inline-block':'none';
  document.getElementById('finishBtn').style.display = 'inline-block';

  // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ per-question
  let timeLeft = questionTime;
  document.getElementById('qTimer').innerText = formatTime(timeLeft);
  perQuestionTimer = setInterval(()=>{
    timeLeft--;
    timeTakenPerQ[current] = (questions.length*questionTime - totalTime) ? (questions.length*questionTime - totalTime) - (current*(questionTime)) + (questionTime - timeLeft) : (questionTime - timeLeft);
    document.getElementById('qTimer').innerText = formatTime(timeLeft);
    if(timeLeft<=0){
      clearInterval(perQuestionTimer);
      // ‡∏Ç‡πâ‡∏≤‡∏°‡∏Ç‡πâ‡∏≠
      userAnswers[current] = null;
      answerTimes[current] = null;
      current++;
      if(current >= questions.length) finishExam();
      else showQuestion();
    }
  },1000);
}

/* =========== ‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö =========== */
function startTotalTimer(){
  clearInterval(timerInterval);
  timerInterval = setInterval(()=>{
    totalTime--;
    const tDisp = document.getElementById('tTimer');
    if(tDisp) tDisp.innerText = formatTime(totalTime);
    const topTimer = document.getElementById('timerDisplay');
    if(topTimer){
      const min = Math.floor(totalTime/60);
      const sec = totalTime%60;
      topTimer.innerText = `‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤: ${min}:${sec.toString().padStart(2,'0')} ‡∏ô‡∏≤‡∏ó‡∏µ`;
    }
    if(totalTime<=0){
      clearInterval(timerInterval);
      finishExam();
    }
  },1000);
}

/* =========== ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö =========== */
function selectAnswer(idx){
  // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤
  const now = new Date();
  answerTimes[current] = now.toLocaleTimeString();
  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ï‡∏≠‡∏ö (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ
  // ‡πÄ‡∏£‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ perQuestionTimer? ‡πÅ‡∏ó‡∏ô, ‡πÄ‡∏£‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å timestamps:
  // (‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î) ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö‡πÉ‡∏ô timeTakenPerQ ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ö‡∏ô‡∏à‡∏≠:
  // ‡πÅ‡∏ï‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏á‡πà‡∏≤‡∏¢ ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å totalTime ‡πÅ‡∏•‡∏∞ index:
  // timeTakenPerQ[current] = questionTime - (timeLeft) --> ‡πÄ‡∏£‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Å‡πá‡∏ö timeLeft ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏≤‡∏ß‡∏£ ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏î‡∏¢‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≤‡∏Å Date()
  timeTakenPerQ[current] = "‚Äî"; // ‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ä‡∏¥‡∏á‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà

  userAnswers[current] = idx;
  // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß
  if(idx === questions[current].answer) score++;

  // ‡πÄ‡∏ô‡πâ‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏â‡∏•‡∏¢ (correct / wrong)
  const buttons = document.querySelectorAll('.options button');
  buttons.forEach((b, i) => {
    b.disabled = true;
    if(i === questions[current].answer) b.classList.add('correct');
    if(i === idx && i !== questions[current].answer) b.classList.add('wrong');
  });

  // ‡∏´‡∏¢‡∏∏‡∏î per-question timer
  clearInterval(perQuestionTimer);

  // ‡∏´‡∏•‡∏±‡∏á 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÑ‡∏õ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•)
  setTimeout(()=>{
    current++;
    if(current >= questions.length) finishExam();
    else showQuestion();
  },800);
}

/* =========== ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Å‡πà‡∏≠‡∏ô/‡∏ñ‡∏±‡∏î‡πÑ‡∏õ =========== */
function prevQuestion(){
  if(current>0){
    current--;
    showQuestion();
  }
}
function nextQuestion(){
  if(current < questions.length-1){
    current++;
    showQuestion();
  }
}

/* =========== ‡∏à‡∏ö‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö =========== */
function finishExam(){
  clearInterval(timerInterval);
  clearInterval(perQuestionTimer);
  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á (recalculate to be safe)
  score = 0;
  for(let i=0;i<questions.length;i++){
    if(userAnswers[i] !== null && userAnswers[i] === questions[i].answer) score++;
  }

  const area = document.getElementById('resultArea');
  area.style.display = 'block';
  document.getElementById('quizArea').style.display = 'none';

  // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏õ YCT2 ‡∏ñ‡∏≤‡∏à‡∏ö YCT1
  let emoji = (exam==='yct1' && score>=35) || (exam==='yct2' && score>=40) ? 'üíØ' : '';
  let html = `<div class="result"><h2>‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö ${exam.toUpperCase()} ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: ${score} / ${questions.length} ${emoji}</h2>`;
  html += `<div style="margin:8px 0; text-align:center;">`;
  html += `<button class="btn" onclick="showAnswers()">‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢</button> `;
  html += `<button class="btn secondary" onclick="restartThisExam()">‡∏ó‡∏≥‡πÉ‡∏´‡∏°‡πà</button> `;
  if(exam==='yct1') html += `<button class="btn" onclick="startExam('yct2')">‡πÑ‡∏õ YCT 2 ‚û°Ô∏è</button> `;
  html += `<button class="btn" onclick="openLeaderboard()">Leaderboard</button>`;
  html += `</div></div>`;
  area.innerHTML = html;

  // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï leaderboard (‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î)
  promptSaveScore();
}

/* =========== ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (Leaderboard) =========== */
function promptSaveScore(){
  const name = prompt("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô Leaderboard):","‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô");
  if(name === null) return;
  saveToLeaderboard(name.trim() || "‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô", exam, score);
}

function saveToLeaderboard(name, examKey, newScore){
  // ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ô localStorage: leaderboard = { yct1: {name:score, ...}, yct2: {...} }
  const key = "yct_leaderboard_v1";
  let board = JSON.parse(localStorage.getItem(key) || "{}");
  if(!board[examKey]) board[examKey] = {};
  // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (max)
  const prev = board[examKey][name];
  if(prev === undefined || newScore > prev){
    board[examKey][name] = newScore;
    localStorage.setItem(key, JSON.stringify(board));
    alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‚Äî ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß!");
  } else {
    alert("‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÄ‡∏î‡∏¥‡∏° ‡∏à‡∏∂‡∏á‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï leaderboard.");
  }
  openLeaderboard();
}

/* =========== ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏â‡∏•‡∏¢ =========== */
function showAnswers(){
  // ‡πÅ‡∏™‡∏î‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡πâ‡∏≠ ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: ‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏•‡∏¥‡∏Å, ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ, ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å
  const wrapper = document.getElementById('questionWrapper');
  document.getElementById('quizArea').style.display = 'block';
  document.getElementById('resultArea').style.display = 'none';
  let html = '<div class="question-links">';
  for(let i=0;i<questions.length;i++){
    html += `<span class="qlink" onclick="showSingleAnswer(${i})">‡∏Ç‡πâ‡∏≠ ${i+1}</span>`;
  }
  html += '</div>';
  html += '<div id="answersList">';
  for(let i=0;i<questions.length;i++){
    const q = questions[i];
    const user = userAnswers[i];
    const correct = q.answer;
    const userText = (user===null)? "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏≠‡∏ö": q.options[user];
    const correctText = q.options[correct];
    const timeClick = answerTimes[i] || "-";
    const colorClass = (user !== null && user === correct) ? 'answer-correct' : 'answer-wrong';
    html += `<div id="ans-${i}" class="question" style="background:#fff;">
      <b>‡∏Ç‡πâ‡∏≠ ${i+1}:</b> ${q.text} <span class="pinyin">${q.pinyin}</span><br>
      ‚è± ‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ï‡∏≠‡∏ö: <i>${timeClick}</i><br>
      ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: <span class="${colorClass}">${userText}</span><br>
      ‚úÖ ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å: <b>${correctText}</b>
    </div>`;
  }
  html += `<div style="text-align:center; margin-top:10px;">
    <button class="btn" onclick="finishViewAnswers()">‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
  </div>`;
  wrapper.innerHTML = html;
}

/* ‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢‡∏Ç‡πâ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ß */
function showSingleAnswer(i){
  const q = questions[i];
  const user = userAnswers[i];
  const correct = q.answer;
  const userText = (user===null)? "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏≠‡∏ö": q.options[user];
  const correctText = q.options[correct];
  const timeClick = answerTimes[i] || "-";
  document.getElementById('questionWrapper').innerHTML = `
    <div class="question">
      <div class="q-title">‡∏Ç‡πâ‡∏≠ ${i+1}: <strong>${q.text}</strong></div>
      <div class="pinyin">${q.pinyin}</div>
      ‚è± ‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ï‡∏≠‡∏ö: <i>${timeClick}</i><br><br>
      ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: <span class="${(user!==null && user===correct)?'answer-correct':'answer-wrong'}">${userText}</span><br>
      ‚úÖ ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å: <b>${correctText}</b>
    </div>
    <div style="text-align:center; margin-top:10px;">
      <button class="btn secondary" onclick="showAnswers()">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏â‡∏•‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    </div>
  `;
  document.getElementById('quizArea').style.display = 'block';
}

/* ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏â‡∏•‡∏¢ ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å */
function finishViewAnswers(){
  document.getElementById('quizArea').style.display = 'none';
  document.getElementById('intro').style.display = 'block';
  document.getElementById('resultArea').style.display = 'none';
  document.getElementById('leaderboardArea').style.display = 'none';
}

/* =========== Leaderboard =========== */
function openLeaderboard(){
  const key = "yct_leaderboard_v1";
  let board = JSON.parse(localStorage.getItem(key) || "{}");
  const area = document.getElementById('leaderboardArea');
  area.style.display = 'block';
  area.innerHTML = `<h3>Leaderboard (‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î)</h3>
    <div class="leaderboard">
      <h4>YCT 1</h4>
      <div id="lb-yct1"></div>
      <h4 style="margin-top:12px">YCT 2</h4>
      <div id="lb-yct2"></div>
      <div style="text-align:center; margin-top:10px;">
        <button class="btn" onclick="clearLeaderboard()">‡∏•‡∏ö Leaderboard</button>
        <button class="btn secondary" onclick="finishViewAnswers()">‡∏õ‡∏¥‡∏î</button>
      </div>
    </div>`;

  renderLB('yct1', board['yct1'] || {});
  renderLB('yct2', board['yct2'] || {});
  // ‡∏ã‡πà‡∏≠‡∏ô quiz view / intro
  document.getElementById('intro').style.display = 'none';
  document.getElementById('quizArea').style.display = 'none';
  document.getElementById('resultArea').style.display = 'none';
}

function renderLB(examKey, data){
  const div = document.getElementById('lb-'+examKey);
  const arr = Object.entries(data || {}).map(([name,score])=>({name,score}));
  arr.sort((a,b)=>b.score - a.score);
  if(arr.length===0){
    div.innerHTML = '<div style="color:#555">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>';
    return;
  }
  let html = '';
  arr.forEach((r,i)=>{
    html += `<div class="lb-row"><div>#${i+1} ${escapeHtml(r.name)}</div><div>${r.score}</div></div>`;
  });
  div.innerHTML = html;
}

function clearLeaderboard(){
  if(!confirm("‡∏•‡∏ö leaderboard ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ")) return;
  localStorage.removeItem("yct_leaderboard_v1");
  openLeaderboard();
}

/* =========== Restart exam (same) =========== */
function restartThisExam(){
  startExam(exam);
}

/* =========== ‡∏¢‡∏π‡∏ó‡∏¥‡∏•‡∏¥‡∏ï‡∏µ‡πâ =========== */
function formatTime(sec){
  if(sec < 0) sec = 0;
  const m = Math.floor(sec/60);
  const s = sec%60;
  return `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
}
function shuffleArray(a){
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}
function escapeHtml(s){
  return String(s).replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[c]));
}

</script>
</body>
</html>
